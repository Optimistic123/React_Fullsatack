(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{8740:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return n(72)}])},5789:function(e,r,n){"use strict";var t=n(5893),a=(n(9008),n(1664)),s=n(1163),o=n(5085),i=n(4865),c=n.n(i);n(4629);s.default.onRouteChangeStart=function(e){return c().start()},s.default.onRouteChangeComplete=function(e){return c().done()},s.default.onRouteChangeError=function(e){return c().done()};r.Z=function(e){var r=e.children;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css",integrity:"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm",crossOrigin:"anonymous"}),(0,t.jsx)("link",{rel:"stylesheet",href:"/static/css/styles.css"})]})," ",(0,t.jsxs)("ul",{className:"nav nav-tabs bg-warning",children:[(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(a.default,{href:"/",children:(0,t.jsx)("a",{className:"nav-link text-dark",children:"Home"})})}),(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(a.default,{href:"/user/link/create",children:(0,t.jsx)("a",{className:"nav-link text-dark btn btn-success",style:{borderRadius:"0px"},children:"Submit a link"})})}),!(0,o.$D)()&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(a.default,{href:"/login",children:(0,t.jsx)("a",{className:"nav-link text-dark",children:"Login"})})}),(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(a.default,{href:"/register",children:(0,t.jsx)("a",{className:"nav-link text-dark",children:"Register"})})})]}),(0,o.$D)()&&"admin"===(0,o.$D)().role&&(0,t.jsx)("li",{className:"nav-item ml-auto",children:(0,t.jsx)(a.default,{href:"/admin",children:(0,t.jsx)("a",{className:"nav-link text-dark",children:(0,o.$D)().name})})}),(0,o.$D)()&&"subscriber"===(0,o.$D)().role&&(0,t.jsx)("li",{className:"nav-item ml-auto",children:(0,t.jsx)(a.default,{href:"/user",children:(0,t.jsx)("a",{className:"nav-link text-dark",children:(0,o.$D)().name})})}),(0,o.$D)()&&(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)("a",{onClick:o.kS,className:"nav-link text-dark",children:"Logout"})})]})," ",(0,t.jsx)("div",{className:"container pt-5 pb-5",children:r})]})}},1838:function(e,r,n){"use strict";n.d(r,{bl:function(){return a},iC:function(){return s}});var t=(0,n(1752).default)().publicRuntimeConfig,a=t.API,s=t.APP_NAME;t.DOMAIN,t.PRODUCTION,t.FB_APP_ID},2933:function(e,r,n){"use strict";n.d(r,{r:function(){return a},U:function(){return s}});var t=n(5893),a=function(e){return(0,t.jsx)("div",{className:"alert alert-success",children:e})},s=function(e){return(0,t.jsx)("div",{className:"alert alert-danger",children:e})}},5085:function(e,r,n){"use strict";n.d(r,{ej:function(){return s},YR:function(){return i},$D:function(){return c},kS:function(){return l},Nq:function(){return u}});var t=n(1955),a=n(1163),s=function(e,r){return o(e)},o=function(e){return t.Z.get(e)},i=function(e,r){var n,a;n="token",a=e.data.token,t.Z.set(n,a,{expires:1}),function(e,r){localStorage.setItem(e,JSON.stringify(r))}("user",e.data.user),r()},c=function(){if(s("token"))return!!localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user"))},l=function(){var e;e="token",t.Z.remove(e),function(e){localStorage.removeItem(e)}("user"),a.default.push("/login")},u=function(e,r){if(localStorage.getItem("user")){var n=JSON.parse(localStorage.getItem("user"));n=e,localStorage.setItem("user",JSON.stringify(n)),r()}}},72:function(e,r,n){"use strict";n.r(r);var t=n(4051),a=n.n(t),s=n(5893),o=n(7294),i=n(5789),c=n(1163),l=n(9669),u=n.n(l),f=n(2933),d=n(1838),m=n(5085);function h(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function g(e,r,n,t,a,s,o){try{var i=e[s](o),c=i.value}catch(l){return void n(l)}i.done?r(c):Promise.resolve(c).then(t,a)}function p(e){return function(){var r=this,n=arguments;return new Promise((function(t,a){var s=e.apply(r,n);function o(e){g(s,t,a,o,i,"next",e)}function i(e){g(s,t,a,o,i,"throw",e)}o(void 0)}))}}function x(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function v(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){x(e,r,n[r])}))}return e}function j(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return h(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.default=function(){var e=(0,o.useState)({name:"Manish",email:"manishece2021@gmail.com",password:"1234567890",error:"",success:"",buttonText:"Register",loadedCategories:[],categories:[]}),r=e[0],n=e[1],t=r.name,l=r.email,h=r.password,g=r.error,b=r.success,y=r.buttonText,N=r.loadedCategories,k=r.categories;(0,o.useEffect)((function(){(0,m.$D)()&&c.default.push("/")}),[]),(0,o.useEffect)((function(){w()}),[]);var w=function(){var e=p(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().get("".concat(d.bl,"/categories"));case 2:t=e.sent,n(v({},r,{loadedCategories:t.data}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(e){return function(){var t=k.indexOf(e),a=j(k);-1===t?a.push(e):a.splice(t,1),console.log("all >> categories",a),n(v({},r,{categories:a,success:"",error:""}))}},O=function(e){return function(t){var a;n(v({},r,(x(a={},e,t.target.value),x(a,"error",""),x(a,"success",""),x(a,"buttonText","Register"),a)))}},C=function(){var e=p(a().mark((function e(s){var o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),console.table({name:t,email:l,password:h,categories:k}),n(v({},r,{buttonText:"Registering"})),e.prev=3,e.next=6,u().post("".concat(d.bl,"/register"),{name:t,email:l,password:h,categories:k});case 6:o=e.sent,console.log(o),n(v({},r,{name:"",email:"",password:"",buttonText:"Submitted",success:o.data.message})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0),n(v({},r,{buttonText:"Register",error:e.t0.response.data.error}));case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(r){return e.apply(this,arguments)}}();return(0,s.jsx)(i.Z,{children:(0,s.jsxs)("div",{className:"col-md-6 offset-md-3",children:[(0,s.jsx)("h1",{children:"Register"}),(0,s.jsx)("br",{}),b&&(0,f.r)(b),g&&(0,f.U)(g),(0,s.jsxs)("form",{onSubmit:C,children:[(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{value:t,onChange:O("name"),type:"text",className:"form-control",placeholder:"Type your name",required:!0})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{value:l,onChange:O("email"),type:"email",className:"form-control",placeholder:"Type your email",required:!0})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{value:h,onChange:O("password"),type:"password",className:"form-control",placeholder:"Type your password",required:!0})}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"text-muted ml-4",children:"Category"}),(0,s.jsx)("ul",{style:{maxHeight:"100px",overflowY:"scroll"},children:N&&N.map((function(e,r){return(0,s.jsxs)("li",{className:"list-unstyled",children:[(0,s.jsx)("input",{type:"checkbox",onChange:S(e._id),className:"mr-2"}),(0,s.jsx)("label",{className:"form-check-label",children:e.name})]},e._id)}))})]}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("button",{className:"btn btn-outline-warning",children:y})})]})]})})}}},function(e){e.O(0,[774,61,304,888,179],(function(){return r=8740,e(e.s=r);var r}));var r=e.O();_N_E=r}]);