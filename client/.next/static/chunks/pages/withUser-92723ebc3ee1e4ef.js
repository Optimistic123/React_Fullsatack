(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[545],{1999:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/withUser",function(){return n(4376)}])},1838:function(t,e,n){"use strict";n.d(e,{bl:function(){return u},iC:function(){return o}});var r=(0,n(1752).default)().publicRuntimeConfig,u=r.API,o=r.APP_NAME;r.DOMAIN,r.PRODUCTION,r.FB_APP_ID},5085:function(t,e,n){"use strict";n.d(e,{ej:function(){return o},YR:function(){return i},$D:function(){return c},kS:function(){return s},Nq:function(){return f}});var r=n(1955),u=n(1163),o=function(t,e){return a(t)},a=function(t){return r.Z.get(t)},i=function(t,e){var n,u;n="token",u=t.data.token,r.Z.set(n,u,{expires:1}),function(t,e){localStorage.setItem(t,JSON.stringify(e))}("user",t.data.user),e()},c=function(){if(o("token"))return!!localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user"))},s=function(){var t;t="token",r.Z.remove(t),function(t){localStorage.removeItem(t)}("user"),u.default.push("/login")},f=function(t,e){if(localStorage.getItem("user")){var n=JSON.parse(localStorage.getItem("user"));n=t,localStorage.setItem("user",JSON.stringify(n)),e()}}},4376:function(t,e,n){"use strict";n.r(e);var r=n(4051),u=n.n(r),o=n(5893),a=n(9669),i=n.n(a),c=n(1838),s=n(5085);function f(t,e,n,r,u,o,a){try{var i=t[o](a),c=i.value}catch(s){return void n(s)}i.done?e(c):Promise.resolve(c).then(r,u)}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){l(t,e,n[e])}))}return t}e.default=function(t){var e=function(e){return(0,o.jsx)(t,p({},e))};return e.getInitialProps=function(){var e,n=(e=u().mark((function e(n){var r,o,a,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,s.ej)("token",n.req),o=null,a=[],!r){e.next=16;break}return e.prev=4,e.next=7,i().get("".concat(c.bl,"/user"),{headers:{authorization:"Bearer ".concat(r),contentType:"application/json"}});case 7:f=e.sent,console.log("response in withUser",f),o=f.data.user,a=f.data.links,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),401===e.t0.response.status&&(o=null);case 16:if(null!==o){e.next=20;break}n.res.writeHead(302,{Location:"/"}),n.res.end(),e.next=32;break;case 20:if(e.t1=p,e.t2={},!t.getInitialProps){e.next=28;break}return e.next=25,t.getInitialProps(n);case 25:e.t3=e.sent,e.next=29;break;case 28:e.t3={};case 29:return e.t4=e.t3,e.t5={user:o,token:r,userLinks:a},e.abrupt("return",(0,e.t1)(e.t2,e.t4,e.t5));case 32:case"end":return e.stop()}}),e,null,[[4,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,u){var o=e.apply(t,n);function a(t){f(o,r,u,a,i,"next",t)}function i(t){f(o,r,u,a,i,"throw",t)}a(void 0)}))});return function(t){return n.apply(this,arguments)}}(),e}}},function(t){t.O(0,[774,61,888,179],(function(){return e=1999,t(t.s=e);var e}));var e=t.O();_N_E=e}]);