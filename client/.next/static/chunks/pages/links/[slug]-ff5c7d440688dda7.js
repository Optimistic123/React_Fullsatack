(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[533],{4819:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/links/[slug]",function(){return t(2531)}])},5789:function(e,n,t){"use strict";var r=t(5893),a=(t(9008),t(1664)),s=t(1163),i=t(5085),c=t(4865),l=t.n(c);t(4629);s.default.onRouteChangeStart=function(e){return l().start()},s.default.onRouteChangeComplete=function(e){return l().done()},s.default.onRouteChangeError=function(e){return l().done()};n.Z=function(e){var n=e.children;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css",integrity:"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm",crossOrigin:"anonymous"}),(0,r.jsx)("link",{rel:"stylesheet",href:"/static/css/styles.css"})]})," ",(0,r.jsxs)("ul",{className:"nav nav-tabs bg-warning",children:[(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)(a.default,{href:"/",children:(0,r.jsx)("a",{className:"nav-link text-dark",children:"Home"})})}),(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)(a.default,{href:"/user/link/create",children:(0,r.jsx)("a",{className:"nav-link text-dark btn btn-success",style:{borderRadius:"0px"},children:"Submit a link"})})}),!(0,i.$D)()&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)(a.default,{href:"/login",children:(0,r.jsx)("a",{className:"nav-link text-dark",children:"Login"})})}),(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)(a.default,{href:"/register",children:(0,r.jsx)("a",{className:"nav-link text-dark",children:"Register"})})})]}),(0,i.$D)()&&"admin"===(0,i.$D)().role&&(0,r.jsx)("li",{className:"nav-item ml-auto",children:(0,r.jsx)(a.default,{href:"/admin",children:(0,r.jsx)("a",{className:"nav-link text-dark",children:(0,i.$D)().name})})}),(0,i.$D)()&&"subscriber"===(0,i.$D)().role&&(0,r.jsx)("li",{className:"nav-item ml-auto",children:(0,r.jsx)(a.default,{href:"/user",children:(0,r.jsx)("a",{className:"nav-link text-dark",children:(0,i.$D)().name})})}),(0,i.$D)()&&(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)("a",{onClick:i.kS,className:"nav-link text-dark",children:"Logout"})})]})," ",(0,r.jsx)("div",{className:"container pt-5 pb-5",children:n})]})}},1838:function(e,n,t){"use strict";t.d(n,{bl:function(){return a},iC:function(){return s}});var r=(0,t(1752).default)().publicRuntimeConfig,a=r.API,s=r.APP_NAME;r.DOMAIN,r.PRODUCTION,r.FB_APP_ID},5085:function(e,n,t){"use strict";t.d(n,{ej:function(){return s},YR:function(){return c},$D:function(){return l},kS:function(){return o},Nq:function(){return u}});var r=t(1955),a=t(1163),s=function(e,n){return i(e)},i=function(e){return r.Z.get(e)},c=function(e,n){var t,a;t="token",a=e.data.token,r.Z.set(t,a,{expires:1}),function(e,n){localStorage.setItem(e,JSON.stringify(n))}("user",e.data.user),n()},l=function(){if(s("token"))return!!localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user"))},o=function(){var e;e="token",r.Z.remove(e),function(e){localStorage.removeItem(e)}("user"),a.default.push("/login")},u=function(e,n){if(localStorage.getItem("user")){var t=JSON.parse(localStorage.getItem("user"));t=e,localStorage.setItem("user",JSON.stringify(t)),n()}}},2531:function(e,n,t){"use strict";t.r(n);var r=t(4051),a=t.n(r),s=t(5893),i=t(7294),c=t(5789),l=(t(1664),t(9008)),o=t(9669),u=t.n(o),d=t(8341),m=t.n(d),f=t(381),h=t.n(f),p=t(1838),x=t(246),g=t.n(x);function j(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function v(e,n,t,r,a,s,i){try{var c=e[s](i),l=c.value}catch(o){return void t(o)}c.done?n(l):Promise.resolve(l).then(r,a)}function k(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var s=e.apply(n,t);function i(e){v(s,r,a,i,c,"next",e)}function c(e){v(s,r,a,i,c,"throw",e)}i(void 0)}))}}function N(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return j(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return j(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=function(e){var n=e.query,t=e.category,r=e.links,o=e.totalLinks,d=e.linksLimit,f=(e.linkSkip,(0,i.useState)(r)),x=f[0],j=f[1],v=(0,i.useState)(d),y=v[0],b=(v[1],(0,i.useState)(0)),S=b[0],w=b[1],_=(0,i.useState)(o),A=_[0],I=_[1],C=(0,i.useState)([]),P=C[0],D=C[1],O=function(e){return e.replace(/<\/?[^>]+(>|$)/g,"")};(0,i.useEffect)((function(){$()}),[]);var $=function(){var e=k(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().get("".concat(p.bl,"/link/popular/").concat(t.slug));case 2:n=e.sent,console.log("response.data",n),D(n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=k(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().put("".concat(p.bl,"/click-count"),{linkId:n});case 2:e.sent,$();case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),R=(function(){var e=k(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().post("".concat(p.bl,"/category/").concat(n.slug));case 2:t=e.sent,j(t.data.links);case 4:case"end":return e.stop()}}),e)})))}(),function(){var e=k(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S+y,e.next=3,u().post("".concat(p.bl,"/category/").concat(n.slug),{skip:t,limit:y});case 3:r=e.sent,j(N(x).concat(N(r.data.links))),console.log("allLinks",x),console.log("response.data.links.length",r.data.links.length),I(r.data.links.length),w(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return(0,s.jsxs)(i.Fragment,{children:[(0,s.jsxs)(l.default,{children:[(0,s.jsxs)("title",{children:[t.name," | ",p.iC]}),(0,s.jsx)("meta",{name:"description",content:O(t.content.substring(0,160))}),(0,s.jsx)("meta",{property:"og:title",content:t.name}),(0,s.jsx)("meta",{property:"og:description",content:O(t.content.substring(0,160))}),(0,s.jsx)("meta",{property:"og:image",content:t.image.url}),(0,s.jsx)("meta",{property:"og:image:secure_url",content:t.image.url})]}),(0,s.jsxs)(c.Z,{children:[(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"col-md-8",children:[(0,s.jsxs)("h1",{className:"display-4 font-weight-bold",children:[t.name," - URL/Links"]}),(0,s.jsx)("div",{className:"lead alert alert-secondary pt-4",children:m()(t.content||"")})]}),(0,s.jsx)("div",{className:"col-md-4",children:(0,s.jsx)("img",{src:t.image.url,alt:t.name,style:{width:"auto",maxHeight:"200px"}})})]}),(0,s.jsx)("br",{}),(0,s.jsx)(g(),{pageStart:0,loadMore:R,hasMore:A>0&&A>=y,loader:(0,s.jsx)("img",{src:"/static/images/loading.gif",alt:"loading"},0),children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-md-8",children:x.map((function(e,n){return(0,s.jsxs)("div",{className:"row alert alert-primary p-2",children:[(0,s.jsx)("div",{className:"col-md-8",onClick:function(n){return E(e._id)},children:(0,s.jsxs)("a",{href:e.url,target:"_blank",children:[(0,s.jsx)("h5",{className:"pt-2",children:e.title}),(0,s.jsx)("h6",{className:"pt-2 text-danger",style:{fontSize:"12px"},children:e.url})]})}),(0,s.jsxs)("div",{className:"col-md-4 pt-2",children:[(0,s.jsxs)("span",{className:"pull-right",children:[h()(e.createdAt).fromNow()," by ",e.postedBy.name]}),(0,s.jsx)("br",{}),(0,s.jsxs)("span",{className:"badge text-secondary pull-right",children:[e.clicks," clicks"]})]}),(0,s.jsxs)("div",{className:"col-md-12",children:[(0,s.jsxs)("span",{className:"badge text-dark",children:[e.type," / ",e.medium]}),e.categories.map((function(e,n){return(0,s.jsx)("span",{className:"badge text-success",children:e.name},n)}))]})]},n)}))}),(0,s.jsxs)("div",{className:"col-md-4",children:[(0,s.jsxs)("h2",{className:"lead",children:["Most popular in ",t.name]}),(0,s.jsx)("div",{className:"p-3",children:P.map((function(e,n){return(0,s.jsxs)("div",{className:"row alert alert-secondary p-2",children:[(0,s.jsx)("div",{className:"col-md-8",onClick:function(){return E(e._id)},children:(0,s.jsxs)("a",{href:e.url,target:"_blank",children:[(0,s.jsx)("h5",{className:"pt-2",children:e.title}),(0,s.jsx)("h6",{className:"pt-2 text-danger",style:{fontSize:"12px"},children:e.url})]})}),(0,s.jsx)("div",{className:"col-md-4 pt-2",children:(0,s.jsxs)("span",{className:"pull-right",children:[h()(e.createdAt).fromNow()," by ",e.postedBy.name]})}),(0,s.jsxs)("div",{className:"col-md-12",children:[(0,s.jsxs)("span",{className:"badge text-dark",children:[e.type," ",e.medium]}),e.categories.map((function(e,n){return(0,s.jsx)("span",{className:"badge text-success",children:e.name},n)})),(0,s.jsxs)("span",{className:"badge text-secondary pull-right",children:[e.clicks," clicks"]})]})]},n)}))})]})]})})]})]})};y.getInitialProps=function(){var e=k(a().mark((function e(n){var t,r,s,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.query,n.req,r=0,s=2,e.next=5,u().post("".concat(p.bl,"/category/").concat(t.slug),{skip:r,limit:s});case 5:return i=e.sent,e.abrupt("return",{query:t,category:i.data.category,links:i.data.links,totalLinks:i.data.links.length,linksLimit:s,linkSkip:r});case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),n.default=y},2361:function(){},4616:function(){}},function(e){e.O(0,[774,885,61,304,876,811,763,888,179],(function(){return n=4819,e(e.s=n);var n}));var n=e.O();_N_E=n}]);