(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{7156:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(4984)}])},5789:function(e,n,r){"use strict";var t=r(5893),a=(r(9008),r(1664)),s=r(1163),i=r(5085),o=r(4865),c=r.n(o);r(4629);s.default.onRouteChangeStart=function(e){return c().start()},s.default.onRouteChangeComplete=function(e){return c().done()},s.default.onRouteChangeError=function(e){return c().done()};n.Z=function(e){var n=e.children;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css",integrity:"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm",crossOrigin:"anonymous"}),(0,t.jsx)("link",{rel:"stylesheet",href:"/static/css/styles.css"})]})," ",(0,t.jsxs)("ul",{className:"nav nav-tabs bg-warning",children:[(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(a.default,{href:"/",children:(0,t.jsx)("a",{className:"nav-link text-dark",children:"Home"})})}),(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(a.default,{href:"/user/link/create",children:(0,t.jsx)("a",{className:"nav-link text-dark btn btn-success",style:{borderRadius:"0px"},children:"Submit a link"})})}),!(0,i.$D)()&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(a.default,{href:"/login",children:(0,t.jsx)("a",{className:"nav-link text-dark",children:"Login"})})}),(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(a.default,{href:"/register",children:(0,t.jsx)("a",{className:"nav-link text-dark",children:"Register"})})})]}),(0,i.$D)()&&"admin"===(0,i.$D)().role&&(0,t.jsx)("li",{className:"nav-item ml-auto",children:(0,t.jsx)(a.default,{href:"/admin",children:(0,t.jsx)("a",{className:"nav-link text-dark",children:(0,i.$D)().name})})}),(0,i.$D)()&&"subscriber"===(0,i.$D)().role&&(0,t.jsx)("li",{className:"nav-item ml-auto",children:(0,t.jsx)(a.default,{href:"/user",children:(0,t.jsx)("a",{className:"nav-link text-dark",children:(0,i.$D)().name})})}),(0,i.$D)()&&(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)("a",{onClick:i.kS,className:"nav-link text-dark",children:"Logout"})})]})," ",(0,t.jsx)("div",{className:"container pt-5 pb-5",children:n})]})}},1838:function(e,n,r){"use strict";r.d(n,{bl:function(){return a},iC:function(){return s}});var t=(0,r(1752).default)().publicRuntimeConfig,a=t.API,s=t.APP_NAME;t.DOMAIN,t.PRODUCTION,t.FB_APP_ID},2933:function(e,n,r){"use strict";r.d(n,{r:function(){return a},U:function(){return s}});var t=r(5893),a=function(e){return(0,t.jsx)("div",{className:"alert alert-success",children:e})},s=function(e){return(0,t.jsx)("div",{className:"alert alert-danger",children:e})}},5085:function(e,n,r){"use strict";r.d(n,{ej:function(){return s},YR:function(){return o},$D:function(){return c},kS:function(){return l},Nq:function(){return u}});var t=r(1955),a=r(1163),s=function(e,n){return i(e)},i=function(e){return t.Z.get(e)},o=function(e,n){var r,a;r="token",a=e.data.token,t.Z.set(r,a,{expires:1}),function(e,n){localStorage.setItem(e,JSON.stringify(n))}("user",e.data.user),n()},c=function(){if(s("token"))return!!localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user"))},l=function(){var e;e="token",t.Z.remove(e),function(e){localStorage.removeItem(e)}("user"),a.default.push("/login")},u=function(e,n){if(localStorage.getItem("user")){var r=JSON.parse(localStorage.getItem("user"));r=e,localStorage.setItem("user",JSON.stringify(r)),n()}}},4984:function(e,n,r){"use strict";r.r(n);var t=r(4051),a=r.n(t),s=r(5893),i=r(7294),o=r(5789),c=r(1664),l=r(1163),u=r(9669),d=r.n(u),f=r(2933),m=r(1838),h=r(5085);function x(e,n,r,t,a,s,i){try{var o=e[s](i),c=o.value}catch(l){return void r(l)}o.done?n(c):Promise.resolve(c).then(t,a)}function g(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function v(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){g(e,n,r[n])}))}return e}n.default=function(){var e=(0,i.useState)({email:"manishece2021@gmail.com",password:"1234567890",error:"",success:"",buttonText:"Login"}),n=e[0],r=e[1];(0,i.useEffect)((function(){(0,h.$D)()&&l.default.push("/")}),[]);var t=n.email,u=n.password,p=n.error,j=n.success,N=n.buttonText,b=function(e){return function(t){var a;r(v({},n,(g(a={},e,t.target.value),g(a,"error",""),g(a,"success",""),g(a,"buttonText","Login"),a)))}},k=function(){var e,s=(e=a().mark((function e(s){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),r(v({},n,{buttonText:"Logging in"})),e.prev=2,e.next=5,d().post("".concat(m.bl,"/login"),{email:t,password:u});case 5:i=e.sent,(0,h.YR)(i,(function(){return(0,h.$D)()&&"admin"===(0,h.$D)().role?l.default.push("/admin"):l.default.push("/user")})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),r(v({},n,{buttonText:"Login",error:e.t0.response.data.error}));case 13:case"end":return e.stop()}}),e,null,[[2,9]])})),function(){var n=this,r=arguments;return new Promise((function(t,a){var s=e.apply(n,r);function i(e){x(s,t,a,i,o,"next",e)}function o(e){x(s,t,a,i,o,"throw",e)}i(void 0)}))});return function(e){return s.apply(this,arguments)}}();return(0,s.jsx)(o.Z,{children:(0,s.jsxs)("div",{className:"col-md-6 offset-md-3",children:[(0,s.jsx)("h1",{children:"Login"}),(0,s.jsx)("br",{}),j&&(0,f.r)(j),p&&(0,f.U)(p),(0,s.jsxs)("form",{onSubmit:k,children:[(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{value:t,onChange:b("email"),type:"email",className:"form-control",placeholder:"Type your email",required:!0})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{value:u,onChange:b("password"),type:"password",className:"form-control",placeholder:"Type your password",required:!0})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("button",{className:"btn btn-outline-warning",children:N})})]}),(0,s.jsx)(c.default,{href:"/auth/password/forgot",children:(0,s.jsx)("a",{className:"text-danger float-right",children:"Forgot Password"})})]})})}}},function(e){e.O(0,[774,61,304,888,179],(function(){return n=7156,e(e.s=n);var n}));var n=e.O();_N_E=n}]);