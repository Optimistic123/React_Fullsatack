(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[880],{83:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/category/create",function(){return n(8739)}])},5789:function(e,t,n){"use strict";var r=n(5893),a=(n(9008),n(1664)),s=n(1163),i=n(5085),c=n(4865),o=n.n(c);n(4629);s.default.onRouteChangeStart=function(e){return o().start()},s.default.onRouteChangeComplete=function(e){return o().done()},s.default.onRouteChangeError=function(e){return o().done()};t.Z=function(e){var t=e.children;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css",integrity:"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm",crossOrigin:"anonymous"}),(0,r.jsx)("link",{rel:"stylesheet",href:"/static/css/styles.css"})]})," ",(0,r.jsxs)("ul",{className:"nav nav-tabs bg-warning",children:[(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)(a.default,{href:"/",children:(0,r.jsx)("a",{className:"nav-link text-dark",children:"Home"})})}),(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)(a.default,{href:"/user/link/create",children:(0,r.jsx)("a",{className:"nav-link text-dark btn btn-success",style:{borderRadius:"0px"},children:"Submit a link"})})}),!(0,i.$D)()&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)(a.default,{href:"/login",children:(0,r.jsx)("a",{className:"nav-link text-dark",children:"Login"})})}),(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)(a.default,{href:"/register",children:(0,r.jsx)("a",{className:"nav-link text-dark",children:"Register"})})})]}),(0,i.$D)()&&"admin"===(0,i.$D)().role&&(0,r.jsx)("li",{className:"nav-item ml-auto",children:(0,r.jsx)(a.default,{href:"/admin",children:(0,r.jsx)("a",{className:"nav-link text-dark",children:(0,i.$D)().name})})}),(0,i.$D)()&&"subscriber"===(0,i.$D)().role&&(0,r.jsx)("li",{className:"nav-item ml-auto",children:(0,r.jsx)(a.default,{href:"/user",children:(0,r.jsx)("a",{className:"nav-link text-dark",children:(0,i.$D)().name})})}),(0,i.$D)()&&(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)("a",{onClick:i.kS,className:"nav-link text-dark",children:"Logout"})})]})," ",(0,r.jsx)("div",{className:"container pt-5 pb-5",children:t})]})}},1838:function(e,t,n){"use strict";n.d(t,{bl:function(){return a},iC:function(){return s}});var r=(0,n(1752).default)().publicRuntimeConfig,a=r.API,s=r.APP_NAME;r.DOMAIN,r.PRODUCTION,r.FB_APP_ID},2933:function(e,t,n){"use strict";n.d(t,{r:function(){return a},U:function(){return s}});var r=n(5893),a=function(e){return(0,r.jsx)("div",{className:"alert alert-success",children:e})},s=function(e){return(0,r.jsx)("div",{className:"alert alert-danger",children:e})}},5085:function(e,t,n){"use strict";n.d(t,{ej:function(){return s},YR:function(){return c},$D:function(){return o},kS:function(){return l},Nq:function(){return u}});var r=n(1955),a=n(1163),s=function(e,t){return i(e)},i=function(e){return r.Z.get(e)},c=function(e,t){var n,a;n="token",a=e.data.token,r.Z.set(n,a,{expires:1}),function(e,t){localStorage.setItem(e,JSON.stringify(t))}("user",e.data.user),t()},o=function(){if(s("token"))return!!localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user"))},l=function(){var e;e="token",r.Z.remove(e),function(e){localStorage.removeItem(e)}("user"),a.default.push("/login")},u=function(e,t){if(localStorage.getItem("user")){var n=JSON.parse(localStorage.getItem("user"));n=e,localStorage.setItem("user",JSON.stringify(n)),t()}}},8739:function(e,t,n){"use strict";n.r(t);var r=n(4051),a=n.n(r),s=n(5893),i=n(5152),c=n(7294),o=n(9669),l=n.n(o),u=n(6770),f=n.n(u),d=n(1838),m=n(2933),h=n(5789),x=n(6398);n(9624);function v(e,t,n,r,a,s,i){try{var c=e[s](i),o=c.value}catch(l){return void n(l)}c.done?t(o):Promise.resolve(o).then(r,a)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){g(e,t,n[t])}))}return e}var b=(0,i.default)((function(){return Promise.all([n.e(774),n.e(937),n.e(876),n.e(167)]).then(n.t.bind(n,1167,23))}),{loadableGenerated:{webpack:function(){return[1167]}},ssr:!1});t.default=(0,x.default)((function(e){e.user;var t=e.token,n=(0,c.useState)({name:"",error:"",success:"",buttonText:"Create",image:""}),r=n[0],i=n[1],o=(0,c.useState)(""),u=o[0],x=o[1],j=(0,c.useState)("Upload image"),k=j[0],N=j[1],y=r.name,O=r.success,w=r.error,P=r.image,S=r.buttonText,C=(r.imageUploadText,function(e){console.log(e),x(e),i(p({},r,{success:"",error:""}))}),E=function(e){var t=!1;e.target.files[0]&&(t=!0),N(e.target.files[0].name),t&&f().imageFileResizer(e.target.files[0],300,300,"JPEG",100,0,(function(e){i(p({},r,{image:e,success:"",error:""}))}),"base64")},R=function(){var e,n=(e=a().mark((function e(n){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),i(p({},r,{buttonText:"Creating"})),console.table({name:y,content:u,image:P}),e.prev=3,e.next=6,l().post("".concat(d.bl,"/category"),{name:y,content:u,image:P},{headers:{Authorization:"Bearer ".concat(t)}});case 6:s=e.sent,console.log("CATEGORY CREATE RESPONSE",s),N("Upload image"),x(""),i(p({},r,{name:"",formData:"",buttonText:"Created",imageUploadText:"Upload image",success:"".concat(s.data.name," is created")})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.log("CATEGORY CREATE ERROR",e.t0),i(p({},r,{buttonText:"Create",error:e.t0.response.data.error}));case 17:case"end":return e.stop()}}),e,null,[[3,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var s=e.apply(t,n);function i(e){v(s,r,a,i,c,"next",e)}function c(e){v(s,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}();return(0,s.jsx)(h.Z,{children:(0,s.jsx)("div",{className:"row",children:(0,s.jsxs)("div",{className:"col-md-6 offset-md-3",children:[(0,s.jsx)("h1",{children:"Create category"}),(0,s.jsx)("br",{}),O&&(0,m.r)(O),w&&(0,m.U)(w),function(){return(0,s.jsxs)("form",{onSubmit:R,children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"text-muted",children:"Name"}),(0,s.jsx)("input",{onChange:(e="name",function(t){var n;i(p({},r,(g(n={},e,t.target.value),g(n,"error",""),g(n,"success",""),n)))}),value:y,type:"text",className:"form-control",required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"text-muted",children:"Content"}),(0,s.jsx)(b,{value:u,onChange:C,placeholder:"Write something...",theme:"bubble",className:"pb-5 mb-3",style:{border:"1px solid #666"}})]}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsxs)("label",{className:"btn btn-outline-secondary",children:[k,(0,s.jsx)("input",{onChange:E,type:"file",accept:"image/*",className:"form-control",hidden:!0})]})}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"btn btn-outline-warning",children:S})})]});var e}()]})})})}))},6398:function(e,t,n){"use strict";n.r(t);var r=n(4051),a=n.n(r),s=n(5893),i=n(9669),c=n.n(i),o=n(1838),l=n(5085);function u(e,t,n,r,a,s,i){try{var c=e[s](i),o=c.value}catch(l){return void n(l)}c.done?t(o):Promise.resolve(o).then(r,a)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}t.default=function(e){var t=function(t){return(0,s.jsx)(e,d({},t))};return t.getInitialProps=function(){var t,n=(t=a().mark((function t(n){var r,s,i,u;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=(0,l.ej)("token",n.req),s=null,i=[],!r){t.next=15;break}return t.prev=4,t.next=7,c().get("".concat(o.bl,"/admin"),{headers:{authorization:"Bearer ".concat(r),contentType:"application/json"}});case 7:u=t.sent,s=u.data.user,i=u.data.links,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),401===t.t0.response.status&&(s=null);case 15:if(null!==s){t.next=19;break}n.res.writeHead(302,{Location:"/"}),n.res.end(),t.next=31;break;case 19:if(t.t1=d,t.t2={},!e.getInitialProps){t.next=27;break}return t.next=24,e.getInitialProps(n);case 24:t.t3=t.sent,t.next=28;break;case 27:t.t3={};case 28:return t.t4=t.t3,t.t5={user:s,token:r,userLinks:i},t.abrupt("return",(0,t.t1)(t.t2,t.t4,t.t5));case 31:case"end":return t.stop()}}),t,null,[[4,12]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var s=t.apply(e,n);function i(e){u(s,r,a,i,c,"next",e)}function c(e){u(s,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),t}}},function(e){e.O(0,[774,61,304,641,888,179],(function(){return t=83,e(e.s=t);var t}));var t=e.O();_N_E=t}]);