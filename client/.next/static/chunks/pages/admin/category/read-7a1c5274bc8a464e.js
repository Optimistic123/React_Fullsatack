(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[713],{7366:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/category/read",function(){return t(2844)}])},5789:function(e,n,t){"use strict";var r=t(5893),a=(t(9008),t(1664)),s=t(1163),c=t(5085),i=t(4865),o=t.n(i);t(4629);s.default.onRouteChangeStart=function(e){return o().start()},s.default.onRouteChangeComplete=function(e){return o().done()},s.default.onRouteChangeError=function(e){return o().done()};n.Z=function(e){var n=e.children;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css",integrity:"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm",crossOrigin:"anonymous"}),(0,r.jsx)("link",{rel:"stylesheet",href:"/static/css/styles.css"})]})," ",(0,r.jsxs)("ul",{className:"nav nav-tabs bg-warning",children:[(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)(a.default,{href:"/",children:(0,r.jsx)("a",{className:"nav-link text-dark",children:"Home"})})}),(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)(a.default,{href:"/user/link/create",children:(0,r.jsx)("a",{className:"nav-link text-dark btn btn-success",style:{borderRadius:"0px"},children:"Submit a link"})})}),!(0,c.$D)()&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)(a.default,{href:"/login",children:(0,r.jsx)("a",{className:"nav-link text-dark",children:"Login"})})}),(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)(a.default,{href:"/register",children:(0,r.jsx)("a",{className:"nav-link text-dark",children:"Register"})})})]}),(0,c.$D)()&&"admin"===(0,c.$D)().role&&(0,r.jsx)("li",{className:"nav-item ml-auto",children:(0,r.jsx)(a.default,{href:"/admin",children:(0,r.jsx)("a",{className:"nav-link text-dark",children:(0,c.$D)().name})})}),(0,c.$D)()&&"subscriber"===(0,c.$D)().role&&(0,r.jsx)("li",{className:"nav-item ml-auto",children:(0,r.jsx)(a.default,{href:"/user",children:(0,r.jsx)("a",{className:"nav-link text-dark",children:(0,c.$D)().name})})}),(0,c.$D)()&&(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)("a",{onClick:c.kS,className:"nav-link text-dark",children:"Logout"})})]})," ",(0,r.jsx)("div",{className:"container pt-5 pb-5",children:n})]})}},1838:function(e,n,t){"use strict";t.d(n,{bl:function(){return a},iC:function(){return s}});var r=(0,t(1752).default)().publicRuntimeConfig,a=r.API,s=r.APP_NAME;r.DOMAIN,r.PRODUCTION,r.FB_APP_ID},2933:function(e,n,t){"use strict";t.d(n,{r:function(){return a},U:function(){return s}});var r=t(5893),a=function(e){return(0,r.jsx)("div",{className:"alert alert-success",children:e})},s=function(e){return(0,r.jsx)("div",{className:"alert alert-danger",children:e})}},5085:function(e,n,t){"use strict";t.d(n,{ej:function(){return s},YR:function(){return i},$D:function(){return o},kS:function(){return l},Nq:function(){return u}});var r=t(1955),a=t(1163),s=function(e,n){return c(e)},c=function(e){return r.Z.get(e)},i=function(e,n){var t,a;t="token",a=e.data.token,r.Z.set(t,a,{expires:1}),function(e,n){localStorage.setItem(e,JSON.stringify(n))}("user",e.data.user),n()},o=function(){if(s("token"))return!!localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user"))},l=function(){var e;e="token",r.Z.remove(e),function(e){localStorage.removeItem(e)}("user"),a.default.push("/login")},u=function(e,n){if(localStorage.getItem("user")){var t=JSON.parse(localStorage.getItem("user"));t=e,localStorage.setItem("user",JSON.stringify(t)),n()}}},2844:function(e,n,t){"use strict";t.r(n);var r=t(4051),a=t.n(r),s=t(5893),c=t(7294),i=t(9669),o=t.n(i),l=t(1838),u=t(1664),d=t(2933),f=t(5789),h=t(6398);function m(e,n,t,r,a,s,c){try{var i=e[s](c),o=i.value}catch(l){return void t(l)}i.done?n(o):Promise.resolve(o).then(r,a)}function v(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var s=e.apply(n,t);function c(e){m(s,r,a,c,i,"next",e)}function i(e){m(s,r,a,c,i,"throw",e)}c(void 0)}))}}function x(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){x(e,n,t[n])}))}return e}n.default=(0,h.default)((function(e){e.user;var n=e.token,t=(0,c.useState)({error:"",success:"",categories:[]}),r=t[0],i=t[1],h=(r.error,r.success),m=r.categories;(0,c.useEffect)((function(){x()}),[]);var x=function(){var e=v(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().get("".concat(l.bl,"/categories"));case 2:n=e.sent,i(g({},r,{categories:n.data}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=v(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().delete("".concat(l.bl,"/category/").concat(t),{headers:{Authorization:"Bearer ".concat(n)}});case 3:r=e.sent,console.log("CATEGORY DELETE SUCCESS ",r),x(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("CATEGORY DELETE ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}();return(0,s.jsxs)(f.Z,{children:[(0,s.jsx)("div",{className:"row",children:(0,s.jsxs)("div",{className:"col",children:[(0,s.jsx)("h1",{children:"List of categories"}),(0,s.jsx)("br",{}),h&&(0,d.r)(h)]})}),(0,s.jsx)("div",{className:"row",children:m.map((function(e,n){return(0,s.jsx)(u.default,{href:"/links/".concat(e.slug),children:(0,s.jsx)("a",{style:{border:"1px solid red"},className:"bg-light p-3 col-md-6",children:(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-md-3",children:(0,s.jsx)("img",{src:e.image&&e.image.url,alt:e.name,style:{width:"100px",height:"auto"},className:"pr-3"})}),(0,s.jsx)("div",{className:"col-md-6",children:(0,s.jsx)("h3",{children:e.name})}),(0,s.jsxs)("div",{className:"col-md-3",children:[(0,s.jsx)(u.default,{href:"/admin/category/".concat(e.slug),children:(0,s.jsx)("button",{className:"btn btn-sm btn-outline-success btn-block mb-1",children:"Update"})}),(0,s.jsx)("button",{onClick:function(n){return function(e,n){e.preventDefault(),window.confirm("Are you sure you want to delete?")&&p(n)}(n,e.slug)},className:"btn btn-sm btn-outline-danger btn-block",children:"Delete"})]})]})})})},n)}))})]})}))},6398:function(e,n,t){"use strict";t.r(n);var r=t(4051),a=t.n(r),s=t(5893),c=t(9669),i=t.n(c),o=t(1838),l=t(5085);function u(e,n,t,r,a,s,c){try{var i=e[s](c),o=i.value}catch(l){return void t(l)}i.done?n(o):Promise.resolve(o).then(r,a)}function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){d(e,n,t[n])}))}return e}n.default=function(e){var n=function(n){return(0,s.jsx)(e,f({},n))};return n.getInitialProps=function(){var n,t=(n=a().mark((function n(t){var r,s,c,u;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=(0,l.ej)("token",t.req),s=null,c=[],!r){n.next=15;break}return n.prev=4,n.next=7,i().get("".concat(o.bl,"/admin"),{headers:{authorization:"Bearer ".concat(r),contentType:"application/json"}});case 7:u=n.sent,s=u.data.user,c=u.data.links,n.next=15;break;case 12:n.prev=12,n.t0=n.catch(4),401===n.t0.response.status&&(s=null);case 15:if(null!==s){n.next=19;break}t.res.writeHead(302,{Location:"/"}),t.res.end(),n.next=31;break;case 19:if(n.t1=f,n.t2={},!e.getInitialProps){n.next=27;break}return n.next=24,e.getInitialProps(t);case 24:n.t3=n.sent,n.next=28;break;case 27:n.t3={};case 28:return n.t4=n.t3,n.t5={user:s,token:r,userLinks:c},n.abrupt("return",(0,n.t1)(n.t2,n.t4,n.t5));case 31:case"end":return n.stop()}}),n,null,[[4,12]])})),function(){var e=this,t=arguments;return new Promise((function(r,a){var s=n.apply(e,t);function c(e){u(s,r,a,c,i,"next",e)}function i(e){u(s,r,a,c,i,"throw",e)}c(void 0)}))});return function(e){return t.apply(this,arguments)}}(),n}}},function(e){e.O(0,[774,61,304,888,179],(function(){return n=7366,e(e.s=n);var n}));var n=e.O();_N_E=n}]);