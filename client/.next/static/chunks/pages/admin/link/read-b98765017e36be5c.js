(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[265],{6980:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/link/read",function(){return t(5468)}])},5789:function(e,n,t){"use strict";var r=t(5893),a=(t(9008),t(1664)),i=t(1163),s=t(5085),c=t(4865),o=t.n(c);t(4629);i.default.onRouteChangeStart=function(e){return o().start()},i.default.onRouteChangeComplete=function(e){return o().done()},i.default.onRouteChangeError=function(e){return o().done()};n.Z=function(e){var n=e.children;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css",integrity:"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm",crossOrigin:"anonymous"}),(0,r.jsx)("link",{rel:"stylesheet",href:"/static/css/styles.css"})]})," ",(0,r.jsxs)("ul",{className:"nav nav-tabs bg-warning",children:[(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)(a.default,{href:"/",children:(0,r.jsx)("a",{className:"nav-link text-dark",children:"Home"})})}),(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)(a.default,{href:"/user/link/create",children:(0,r.jsx)("a",{className:"nav-link text-dark btn btn-success",style:{borderRadius:"0px"},children:"Submit a link"})})}),!(0,s.$D)()&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)(a.default,{href:"/login",children:(0,r.jsx)("a",{className:"nav-link text-dark",children:"Login"})})}),(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)(a.default,{href:"/register",children:(0,r.jsx)("a",{className:"nav-link text-dark",children:"Register"})})})]}),(0,s.$D)()&&"admin"===(0,s.$D)().role&&(0,r.jsx)("li",{className:"nav-item ml-auto",children:(0,r.jsx)(a.default,{href:"/admin",children:(0,r.jsx)("a",{className:"nav-link text-dark",children:(0,s.$D)().name})})}),(0,s.$D)()&&"subscriber"===(0,s.$D)().role&&(0,r.jsx)("li",{className:"nav-item ml-auto",children:(0,r.jsx)(a.default,{href:"/user",children:(0,r.jsx)("a",{className:"nav-link text-dark",children:(0,s.$D)().name})})}),(0,s.$D)()&&(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)("a",{onClick:s.kS,className:"nav-link text-dark",children:"Logout"})})]})," ",(0,r.jsx)("div",{className:"container pt-5 pb-5",children:n})]})}},1838:function(e,n,t){"use strict";t.d(n,{bl:function(){return a},iC:function(){return i}});var r=(0,t(1752).default)().publicRuntimeConfig,a=r.API,i=r.APP_NAME;r.DOMAIN,r.PRODUCTION,r.FB_APP_ID},5085:function(e,n,t){"use strict";t.d(n,{ej:function(){return i},YR:function(){return c},$D:function(){return o},kS:function(){return l},Nq:function(){return u}});var r=t(1955),a=t(1163),i=function(e,n){return s(e)},s=function(e){return r.Z.get(e)},c=function(e,n){var t,a;t="token",a=e.data.token,r.Z.set(t,a,{expires:1}),function(e,n){localStorage.setItem(e,JSON.stringify(n))}("user",e.data.user),n()},o=function(){if(i("token"))return!!localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user"))},l=function(){var e;e="token",r.Z.remove(e),function(e){localStorage.removeItem(e)}("user"),a.default.push("/login")},u=function(e,n){if(localStorage.getItem("user")){var t=JSON.parse(localStorage.getItem("user"));t=e,localStorage.setItem("user",JSON.stringify(t)),n()}}},5468:function(e,n,t){"use strict";t.r(n);var r=t(4051),a=t.n(r),i=t(5893),s=t(7294),c=t(5789),o=t(1664),l=t(9669),u=t.n(l),d=(t(8341),t(381)),f=t.n(d),h=t(1838),m=t(246),p=t.n(m),x=t(6398),v=t(5085);function g(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function k(e,n,t,r,a,i,s){try{var c=e[i](s),o=c.value}catch(l){return void t(l)}c.done?n(o):Promise.resolve(o).then(r,a)}function j(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function s(e){k(i,r,a,s,c,"next",e)}function c(e){k(i,r,a,s,c,"throw",e)}s(void 0)}))}}function b(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return g(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var N=function(e){var n=e.token,t=e.links,r=e.totalLinks,l=e.linksLimit,d=(e.linkSkip,(0,s.useState)(t)),m=d[0],x=d[1],v=(0,s.useState)(l),g=v[0],k=(v[1],(0,s.useState)(0)),N=k[0],y=k[1],w=(0,s.useState)(r),S=w[0],A=w[1],P=function(){var e=j(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u().delete("".concat(h.bl,"/link/admin/").concat(t),{headers:{Authorization:"Bearer ".concat(n)}});case 3:r=e.sent,console.log("LINK DELETE SUCCESS ",r),window.location.reload(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("LINK DELETE ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}(),I=function(){var e=j(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=N+g,e.next=3,u().post("".concat(h.bl,"/links"),{skip:t,limit:g},{headers:{Authorization:"Bearer ".concat(n)}});case 3:r=e.sent,x(b(m).concat(b(r.data))),A(r.data.length),y(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.jsxs)(c.Z,{children:[(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",children:(0,i.jsx)("h1",{className:"display-4 font-weight-bold",children:"All Links"})})}),(0,i.jsx)("br",{}),(0,i.jsx)(p(),{pageStart:0,loadMore:I,hasMore:S>0&&S>=g,loader:(0,i.jsx)("img",{src:"/static/images/loading.gif",alt:"loading"},0),children:(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col-md-12",children:m.map((function(e,n){return(0,i.jsxs)("div",{className:"row alert alert-primary p-2",children:[(0,i.jsx)("div",{className:"col-md-8",onClick:function(n){return handleClick(e._id)},children:(0,i.jsxs)("a",{href:e.url,target:"_blank",children:[(0,i.jsx)("h5",{className:"pt-2",children:e.title}),(0,i.jsx)("h6",{className:"pt-2 text-danger",style:{fontSize:"12px"},children:e.url})]})}),(0,i.jsxs)("div",{className:"col-md-4 pt-2",children:[(0,i.jsxs)("span",{className:"pull-right",children:[f()(e.createdAt).fromNow()," by ",e.postedBy.name]}),(0,i.jsx)("br",{}),(0,i.jsxs)("span",{className:"badge text-secondary pull-right",children:[e.clicks," clicks"]})]}),(0,i.jsxs)("div",{className:"col-md-12",children:[(0,i.jsxs)("span",{className:"badge text-dark",children:[e.type," / ",e.medium]}),e.categories.map((function(e,n){return(0,i.jsx)("span",{className:"badge text-success",children:e.name},n)})),(0,i.jsx)("span",{onClick:function(n){return function(e,n){e.preventDefault(),window.confirm("Are you sure you want to delete?")&&P(n)}(n,e._id)},className:"badge text-danger pull-right",children:"Delete"}),(0,i.jsx)(o.default,{href:"/user/link/".concat(e._id),children:(0,i.jsx)("a",{children:(0,i.jsx)("span",{className:"badge text-warning pull-right",children:"Update"})})})]})]},n)}))})})})]})};N.getInitialProps=function(){var e=j(a().mark((function e(n){var t,r,i,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.req,r=0,i=2,s=(0,v.ej)("token",t),e.next=6,u().post("".concat(h.bl,"/links"),{skip:r,limit:i},{headers:{Authorization:"Bearer ".concat(s)}});case 6:return c=e.sent,e.abrupt("return",{links:c.data,totalLinks:c.data.length,linksLimit:i,linkSkip:r,token:s});case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),n.default=(0,x.default)(N)},6398:function(e,n,t){"use strict";t.r(n);var r=t(4051),a=t.n(r),i=t(5893),s=t(9669),c=t.n(s),o=t(1838),l=t(5085);function u(e,n,t,r,a,i,s){try{var c=e[i](s),o=c.value}catch(l){return void t(l)}c.done?n(o):Promise.resolve(o).then(r,a)}function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){d(e,n,t[n])}))}return e}n.default=function(e){var n=function(n){return(0,i.jsx)(e,f({},n))};return n.getInitialProps=function(){var n,t=(n=a().mark((function n(t){var r,i,s,u;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=(0,l.ej)("token",t.req),i=null,s=[],!r){n.next=15;break}return n.prev=4,n.next=7,c().get("".concat(o.bl,"/admin"),{headers:{authorization:"Bearer ".concat(r),contentType:"application/json"}});case 7:u=n.sent,i=u.data.user,s=u.data.links,n.next=15;break;case 12:n.prev=12,n.t0=n.catch(4),401===n.t0.response.status&&(i=null);case 15:if(null!==i){n.next=19;break}t.res.writeHead(302,{Location:"/"}),t.res.end(),n.next=31;break;case 19:if(n.t1=f,n.t2={},!e.getInitialProps){n.next=27;break}return n.next=24,e.getInitialProps(t);case 24:n.t3=n.sent,n.next=28;break;case 27:n.t3={};case 28:return n.t4=n.t3,n.t5={user:i,token:r,userLinks:s},n.abrupt("return",(0,n.t1)(n.t2,n.t4,n.t5));case 31:case"end":return n.stop()}}),n,null,[[4,12]])})),function(){var e=this,t=arguments;return new Promise((function(r,a){var i=n.apply(e,t);function s(e){u(i,r,a,s,c,"next",e)}function c(e){u(i,r,a,s,c,"throw",e)}s(void 0)}))});return function(e){return t.apply(this,arguments)}}(),n}},2361:function(){},4616:function(){}},function(e){e.O(0,[774,885,61,304,876,811,763,888,179],(function(){return n=6980,e(e.s=n);var n}));var n=e.O();_N_E=n}]);